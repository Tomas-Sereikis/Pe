!function(){function a(){}function b(){if(this instanceof b==!1)throw new ReferenceError;this.stack=[],this.evaluations=[],this.queue=[],this.locked=!1,this.triggers=[],this.closed=!1}var c=this;a.prototype=new Error;var d=function(a){if("function"!=typeof a)throw new TypeError},e=function(){if(this.closed)throw new a},f=function(a,b,c){var d=!1,e={async:function(){return d=!0,c}};a.apply(e,b),d||c()},g=function(a){for(var b=[],c=0;c<this.stack.length;c++){var d=this.stack[c],e="undefined"==typeof d.process?-1:d.process;a>e&&(b.push({evaluation:this.evaluations[a],params:this.stack[c].params}),d.process=a)}return b},h=function(a){if(this.isLocked())return void this.triggers.push(a);if(this.queue.length>0){this.locked=!0;var b=this.queue[0];if(b.length>0){var c=b.shift(),d=this;f(c.evaluation,c.params,function(){d.locked=!1,h.call(d,a)})}else this.queue.shift(),this.locked=!1,h.call(this,a)}else for(this.locked=!1,a();this.triggers.length;)this.triggers.shift()()},i=function(a,b){return b.length>0?(a.push(b),!0):!1};b.prototype={push:function(a){e.call(this),a=[].slice.call(arguments),this.stack.push({params:a});var b=!1;return this.evaluations.forEach(function(a,c){i(this.queue,g.call(this,c))&&(b=!0)},this),b&&h.call(this,function(){}),this},evaluate:function(a){d(a),e.call(this),this.evaluations.push(a);var b=this.evaluations.length-1;return i(this.queue,g.call(this,b))&&h.call(this,function(){}),this},finish:function(a){d(a),this.closed=!0,h.call(this,function(){a()})},isLocked:function(){return this.locked},isClosed:function(){return this.closed}};var j=c.Pe;c.Pe=b,c.Pe.noConflict=function(){return c.Pe=j,b}}();
//# sourceMappingURL=pe.min.js.map